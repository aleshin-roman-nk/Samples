<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢–µ—Å—Ç API: Sync vs Async</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 40px;
        }
        button {
            margin-right: 10px;
            padding: 10px 20px;
            font-size: 16px;
        }
        li {
            margin: 6px 0;
            font-family: monospace;
        }
        .time {
            color: gray;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <h2>–¢–µ—Å—Ç API: –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π vs –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π</h2>

    <button onclick="sendRequests('sync')">üî¥ –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API</button>
    <button onclick="sendRequests('async')">üü¢ –¢–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API</button>

    <ul id="result"></ul>

    <script>
        async function sendRequests(type) {
            const ul = document.getElementById('result');
            ul.innerHTML = '';

            const endpoint = `http://localhost:5262/api/test/${type}`;

            for (let i = 1; i <= 10; i++) {
                const li = document.createElement('li');
                const start = performance.now();

                li.textContent = `üîÑ [${i}] ${type.toUpperCase()} ‚Üí –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω...`;
                ul.appendChild(li);

                fetch(endpoint)
                    .then(res => res.text())
                    .then(text => {
                        const duration = Math.round(performance.now() - start);
                        li.innerHTML = `‚úÖ [${i}] ${type.toUpperCase()} ‚Üí ${text} <span class="time">(${duration} –º—Å)</span>`;
                    })
                    .catch(err => {
                        const duration = Math.round(performance.now() - start);
                        li.innerHTML = `‚ùå [${i}] ${type.toUpperCase()} ‚Üí –û—à–∏–±–∫–∞: ${err.message} <span class="time">(${duration} –º—Å)</span>`;
                    });
            }
        }
    </script>
</body>
</html>
